import{a as W}from"./chunk-4VRP7RF4.js";import{a as Y,b as X,c as J,d as Q,e as ee,f as te,g as ne,h as oe,i as ie,j as se,k as re,l as C,m as ae}from"./chunk-7L2ICS3E.js";import{c as le,d as de}from"./chunk-BBZPKG4T.js";import{r as ce}from"./chunk-KH6YQOOB.js";import{$a as L,C as I,Ca as G,G as E,Ha as d,Ia as l,J as x,Ja as g,M as F,N as B,Q as h,Qa as _,R as U,S as k,Ua as z,Xa as r,ab as f,b as P,bb as $,cb as Z,da as T,i as O,ia as j,m as R,o as y,oa as S,pa as m,sa as e,ta as V,u as A,ua as K,v as N,wa as p,wb as H,xb as q}from"./chunk-IMTELVGP.js";import{a as M,b as D}from"./chunk-5G567QLT.js";function Ee(t,o){}var w=()=>{let t=typeof window<"u"?window:void 0;return t&&t.tinymce?t.tinymce:null},Se=(()=>{class t{constructor(){this.onBeforePaste=new e,this.onBlur=new e,this.onClick=new e,this.onContextMenu=new e,this.onCopy=new e,this.onCut=new e,this.onDblclick=new e,this.onDrag=new e,this.onDragDrop=new e,this.onDragEnd=new e,this.onDragGesture=new e,this.onDragOver=new e,this.onDrop=new e,this.onFocus=new e,this.onFocusIn=new e,this.onFocusOut=new e,this.onKeyDown=new e,this.onKeyPress=new e,this.onKeyUp=new e,this.onMouseDown=new e,this.onMouseEnter=new e,this.onMouseLeave=new e,this.onMouseMove=new e,this.onMouseOut=new e,this.onMouseOver=new e,this.onMouseUp=new e,this.onPaste=new e,this.onSelectionChange=new e,this.onActivate=new e,this.onAddUndo=new e,this.onBeforeAddUndo=new e,this.onBeforeExecCommand=new e,this.onBeforeGetContent=new e,this.onBeforeRenderUI=new e,this.onBeforeSetContent=new e,this.onChange=new e,this.onClearUndos=new e,this.onDeactivate=new e,this.onDirty=new e,this.onExecCommand=new e,this.onGetContent=new e,this.onHide=new e,this.onInit=new e,this.onInitNgModel=new e,this.onLoadContent=new e,this.onNodeChange=new e,this.onPostProcess=new e,this.onPostRender=new e,this.onPreInit=new e,this.onPreProcess=new e,this.onProgressState=new e,this.onRedo=new e,this.onRemove=new e,this.onReset=new e,this.onResizeEditor=new e,this.onSaveContent=new e,this.onSetAttrib=new e,this.onObjectResizeStart=new e,this.onObjectResized=new e,this.onObjectSelected=new e,this.onSetContent=new e,this.onShow=new e,this.onSubmit=new e,this.onUndo=new e,this.onVisualAid=new e}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=k({type:t,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),t})(),ue=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],v=(t,o,n)=>y(t,o).pipe(E(n)),_e=(t,o,n)=>{Me(t).forEach(a=>{let i=t[a];v(o,a.substring(2),n).subscribe(u=>{i.observers.length>0&&t.ngZone.run(()=>i.emit({event:u,editor:o}))})})},Me=t=>{let o=me(t.ignoreEvents,[]);return me(t.allowedEvents,ue).filter(s=>ue.includes(s)&&!o.includes(s))},me=(t,o)=>typeof t=="string"?t.split(",").map(n=>n.trim()):Array.isArray(t)?t:o,he=0,De=t=>{let n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return he++,t+"_"+s+he+String(n)},pe=t=>typeof t<"u"&&t.tagName.toLowerCase()==="textarea",ge=t=>typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" "),Pe=(t,o)=>ge(t).concat(ge(o)),Oe=()=>{},fe=t=>t==null,Ce=()=>({script$:null}),Re=()=>{let t=Ce();return{load:(s,a)=>t.script$||(t.script$=R(()=>{let i=s.createElement("script");return i.referrerPolicy="origin",i.type="application/javascript",i.src=a,s.head.appendChild(i),y(i,"load").pipe(A(1),N(void 0))}).pipe(I({bufferSize:1,refCount:!0}))),reinitialize:()=>{t=Ce()}}},Ae=Re(),Ne=new B("TINYMCE_SCRIPT_SRC"),Ie={provide:Y,useExisting:x(()=>b),multi:!0},b=(()=>{class t extends Se{constructor(n,s,a,i){super(),this.platformId=a,this.tinymceScriptSrc=i,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=Oe,this.destroy$=new P,this.initialise=()=>{let u=D(M({},this.init),{selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:Pe(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:c=>{this._editor=c,v(c,"init",this.destroy$).subscribe(()=>{this.initEditor(c)}),_e(this,c,this.destroy$),this.init&&typeof this.init.setup=="function"&&this.init.setup(c)}});pe(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{w().init(u)})},this._elementRef=n,this.ngZone=s}set disabled(n){this._disabled=n,this._editor&&this._editor.initialized&&(typeof this._editor.mode?.set=="function"?this._editor.mode.set(n?"readonly":"design"):this._editor.setMode(n?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(n){this._editor&&this._editor.initialized?this._editor.setContent(fe(n)?"":n):this.initialValue=n===null?void 0:n}registerOnChange(n){this.onChangeCallback=n}registerOnTouched(n){this.onTouchedCallback=n}setDisabledState(n){this.disabled=n}ngAfterViewInit(){q(this.platformId)&&(this.id=this.id||De("tiny-angular"),this.inline=this.inline!==void 0?this.inline!==!1:!!this.init?.inline,this.createElement(),w()!==null?this.initialise():this._element&&this._element.ownerDocument&&Ae.load(this._element.ownerDocument,this.getScriptSrc()).pipe(E(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),w()!==null&&w().remove(this._editor)}createElement(){let n=typeof this.tagName=="string"?this.tagName:"div";this._element=document.createElement(this.inline?n:"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,pe(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return fe(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(n){v(n,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),v(n,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(n))}),typeof this.initialValue=="string"&&this.ngZone.run(()=>{n.setContent(this.initialValue),n.getContent()!==this.initialValue&&this.emitOnChange(n),this.onInitNgModel!==void 0&&this.onInitNgModel.emit(n)})}emitOnChange(n){this.onChangeCallback&&this.onChangeCallback(n.getContent({format:this.outputFormat}))}}return t.\u0275fac=function(n){return new(n||t)(m(j),m(V),m(T),m(Ne,8))},t.\u0275cmp=h({type:t,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[L([Ie]),K,f],decls:1,vars:0,template:function(n,s){n&1&&G(0,Ee,0,0,"ng-template")},dependencies:[H,C],styles:["[_nghost-%COMP%]{display:block}"]}),t})(),we=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=U({type:t}),t.\u0275inj=F({imports:[b]}),t})();var Fe=t=>[t],Be=()=>({height:800,menubar:!1,file_picker_types:"file image media"}),ot=(()=>{let o=class o{constructor(s,a){this.siteGraphService=s,this.formBuilder=a,this.appValues=de,this.mceKey=W.MCE_KEY,this.headingData$=O({headingText:"Add Page",taglineText:"",taglineSmallText:"",alignment:this.appValues.HEADERBLOCK_ALIGNMENT_NONE,mb:this.appValues.HEADERBLOCK_MB}),this.newContentForm=this.formBuilder.group({collectionName:"",title:"",blogType:"",parent_id:"",img_src:""}),this.html="<p>Lorem ipsum</p>"}addContent(){let s=this.html||"",a=this.newContentForm.value.collectionName||"",i=this.newContentForm.value.title||"",u=this.newContentForm.value.title?this.newContentForm.value.title?.trim().substring(1,10):"",c=this.newContentForm.value.parent_id||"",ve=this.newContentForm.value.img_src||"",be={content:s,title:i,slug:u,parent_id:c,img_src:ve,author:1,readmore_url:"{id}/post/"};this.siteGraphService.addBlockItemToFireBase(a,be),this.newContentForm.reset()}};o.\u0275fac=function(a){return new(a||o)(m(ce),m(re))},o.\u0275cmp=h({type:o,selectors:[["app-add-page"]],standalone:!0,features:[f],decls:39,vars:9,consts:[[3,"headingData$"],[1,"overflow-x-hidden","relative","block","px-3","py-6","md:px-8","md:py-7","mx-1","my-1","md:mx-10","md:my-1","rounded-lg","border-b","border-pink-950","bg-slate-950","shadow","text-white"],[1,"flex","flex-wrap",3,"formGroup","ngSubmit"],[1,"py-2","pr-6"],["for","title",1,"pb-1","pr-2"],["id","title","size","124","type","text","formControlName","title",1,"p-3","text-black"],["for","img_src",1,"pb-1","pr-2"],["id","img_src","type","text","formControlName","img_src",1,"p-3","text-black"],["for","collectionName",1,"pb-1","pr-2"],["name","collectionName","id","collectionName",1,"p-3","text-black"],["value","blog_posts"],["for","parent_id",1,"pb-1","pr-2"],["name","parent_id","id","parent_id",1,"p-3","text-black"],["value","sUrZVZv9U6XzjE4DOyHR"],["value","ZuiS8o4wVmwyhs5WhaKS"],["value","LKA3NV9E6ThrCyVP401y"],["value","ibCZoMJKZLhmcXHdTqWn"],["value","VdWI2beGV1c3tbUzuqwh"],["type","submit",1,"button","pl-3"],["initialValue","","plugins","advlist autolink lists link image charmap preview anchor searchreplace visualblocks code fullscreen insertdatetime media table paste code help wordcount","tagName","div","toolbar","undo redo | image lists charmap visualblocks media table | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | code",3,"apiKey","ngModel","init","inline","onSaveContent","ngModelChange"]],template:function(a,i){a&1&&(g(0,"app-heading-block",0),d(1,"section",1)(2,"form",2),_("ngSubmit",function(){return i.addContent()}),d(3,"div",3)(4,"label",4),r(5," title "),l(),r(6,"\xA0 "),g(7,"input",5),l(),d(8,"div",3)(9,"label",6),r(10," img_src "),l(),r(11,"\xA0 "),g(12,"input",7),l(),d(13,"div",3)(14,"label",8),r(15," collectionName "),l(),r(16,"\xA0 "),d(17,"select",9)(18,"option",10),r(19,"blog_posts"),l()()(),d(20,"div",3)(21,"label",11),r(22," blogType "),l(),r(23,"\xA0 "),d(24,"select",12)(25,"option",13),r(26,"News"),l(),d(27,"option",14),r(28,"Projects"),l(),d(29,"option",15),r(30,"Research"),l(),d(31,"option",16),r(32,"Course 1"),l(),d(33,"option",17),r(34,"Course 2"),l()()(),d(35,"button",18)(36,"strong"),r(37,"Add data"),l()()(),d(38,"editor",19),_("onSaveContent",function(){return i.addContent()})("ngModelChange",function(c){return i.html=c}),l()()),a&2&&(p("headingData$",Z(6,Fe,i.headingData$)),S(2),p("formGroup",i.newContentForm),S(36),z("apiKey",i.mceKey),p("ngModel",i.html)("init",$(8,Be))("inline",!1))},dependencies:[C,te,ie,se,X,J,Q,ee,ae,ne,oe,le,we,b]});let t=o;return t})();export{ot as AddPageComponent};
